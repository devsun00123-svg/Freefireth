<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>ลงทะเบียนทีม Free Fire</title>
  <style>
    body { font-family: Arial, Helvetica, sans-serif; padding: 16px; max-width:700px; margin:auto; }
    label {display:block; margin-top:10px;}
    input, textarea { width:100%; padding:8px; margin-top:4px; box-sizing:border-box; }
    .player { display:flex; gap:8px; margin-top:5px; }
    .player input { flex:1; }
    button { margin-top:12px; padding:10px 16px; }
    .msg { margin-top:10px; }
  </style>
</head>
<body>
  <h1>ลงทะเบียนทีม Free Fire</h1>
  <form id="regForm">
    <label>ชื่อทีม
      <input name="teamName" required />
    </label>

    <h3>รายชื่อผู้เล่น (5 คน)</h3>
    <div class="player">
      <input name="p0_name" placeholder="ผู้เล่น 1 ชื่อ" required />
      <input name="p0_ffid" placeholder="FF ID" />
    </div>
    <div class="player">
      <input name="p1_name" placeholder="ผู้เล่น 2 ชื่อ" required />
      <input name="p1_ffid" placeholder="FF ID" />
    </div>
    <div class="player">
      <input name="p2_name" placeholder="ผู้เล่น 3 ชื่อ" required />
      <input name="p2_ffid" placeholder="FF ID" />
    </div>
    <div class="player">
      <input name="p3_name" placeholder="ผู้เล่น 4 ชื่อ" required />
      <input name="p3_ffid" placeholder="FF ID" />
    </div>
    <div class="player">
      <input name="p4_name" placeholder="ผู้เล่น 5 ชื่อ" required />
      <input name="p4_ffid" placeholder="FF ID" />
    </div>

    <label>ช่องทางติดต่อ (เบอร์/ไลน์)
      <input name="contact" />
    </label>

    <label>หมายเหตุ
      <textarea name="notes" rows="3"></textarea>
    </label>

    <button type="submit">ส่งลงทะเบียน</button>
    <div class="msg" id="msg"></div>
  </form>

  <script>
    const WEBHOOK_URL = "https://discord.com/api/webhooks/1413144389299212319/J_yAL8REvMztS7DULDYrRE33TxJkQvLQA-eY0_olgTcQY3RHQZmN2D1qVjdLNR8J1CJo";

    document.getElementById('regForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const f = new FormData(e.target);
      const players = [];
      for (let i=0;i<5;i++){
        players.push(`- ${f.get('p'+i+'_name')} (${f.get('p'+i+'_ffid') || '-'})`);
      }

      const content =
        `**ทีม:** ${f.get('teamName')}\n` +
        `**ผู้เล่น:**\n${players.join("\n")}\n` +
        `**ติดต่อ:** ${f.get('contact') || '-'}\n` +
        `**หมายเหตุ:** ${f.get('notes') || '-'}`;

      document.getElementById('msg').textContent = "กำลังส่ง...";

      try {
        const r = await fetch(WEBHOOK_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ content })
        });
        if (r.ok) {
          document.getElementById('msg').textContent = "ส่งเรียบร้อย 🎉";
          e.target.reset();
        } else {
          document.getElementById('msg').textContent = "ส่งไม่สำเร็จ ❌";
        }
      } catch (err) {
        document.getElementById('msg').textContent = "เชื่อมต่อผิดพลาด ❌";
        console.error(err);
      }
    });
  </script>
</body>
</html>
